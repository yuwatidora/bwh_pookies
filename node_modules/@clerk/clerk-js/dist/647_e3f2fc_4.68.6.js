"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[647],{3647:function(e,t,i){i.d(t,{$:function(){return p}});var n=i(2903),a=i(2784),o=i(5480),r=i(8173),l=i(3476),s=i(8690),u=i(4804),c=i(4334),d=i(1609),g=i(4095),m=i(2848),v=i(6884),h=i(1659);const p=e=>{const t=(0,s.useCardState)(),i=(0,o.a2)({onNextStep:()=>t.setError(void 0)}),p=a.useRef(null),{createOrganization:b,isLoaded:f,setActive:z,userMemberships:x}=(0,r.useCoreOrganizationList)({userMemberships:h.AO.userMemberships}),{organization:S}=(0,r.useCoreOrganization)(),[C,Z]=a.useState(),_=(0,d.Yp)("name","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationName"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationName")}),B=(0,d.Yp)("slug","",{type:"text",label:(0,c.u1)("formFieldLabel__organizationSlug"),placeholder:(0,c.u1)("formFieldInputPlaceholder__organizationSlug")}),P=!!_.value,T=()=>{var t;e.navigateAfterCreateOrganization(p.current),null===(t=e.onComplete)||void 0===t||t.call(e)},y=e=>{B.setValue(e)},R="organizationList"===e.flow?"xlargeMedium":void 0,w="organizationList"===e.flow?"headingRegularRegular":void 0;return(0,n.BX)(o.en,{...i.props,children:[(0,n.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:e.startPage.headerTitle,headerSubtitle:e.startPage.headerSubtitle,headerTitleTextVariant:R,headerSubtitleTextVariant:w,sx:e=>({minHeight:e.sizes.$60}),children:(0,n.BX)(s.Form.Root,{onSubmit:async n=>{var a,o;if(n.preventDefault(),P&&f)try{const t=await b({name:_.value,slug:B.value});if(C&&await t.setLogo({file:C}),p.current=t,await z({organization:t}),null===(a=x.revalidate)||void 0===a||a.call(x),null!==(o=e.skipInvitationScreen)&&void 0!==o?o:1===t.maxAllowedMemberships)return T();i.nextStep()}catch(e){(0,d.S3)(e,[_,B],t.setError)}},children:[(0,n.tZ)(v.D,{organization:{name:_.value},onAvatarChange:async e=>await Z(e),onAvatarRemove:C?()=>(t.setIdle(),Z(null)):null,avatarPreviewPlaceholder:(0,n.tZ)(s.IconButton,{variant:"ghost",colorScheme:"neutral","aria-label":"Upload organization logo",icon:(0,n.tZ)(l.Icon,{size:"md",icon:u.gq,sx:e=>({transitionDuration:e.transitionDuration.$controls})}),sx:e=>({width:e.sizes.$11,height:e.sizes.$11,borderRadius:e.radii.$md,backgroundColor:e.colors.$avatarBackground,":hover":{backgroundColor:d.O9.makeTransparent(e.colors.$avatarBackground,.2),svg:{transform:"scale(1.2)"}}})})}),(0,n.tZ)(s.Form.ControlRow,{elementId:_.id,children:(0,n.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},autoFocus:!0,..._.props,onChange:e=>{_.setValue(e.target.value),y((0,d.qi)(e.target.value))},required:!0})}),(0,n.tZ)(s.Form.ControlRow,{elementId:B.id,children:(0,n.tZ)(s.Form.Control,{sx:{flexBasis:"80%"},...B.props,onChange:e=>{y(e.target.value)},icon:u.Zc,required:!0})}),(0,n.BX)(s.FormButtonContainer,{children:[(0,n.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!P,localizationKey:(0,c.u1)("createOrganization.formButtonSubmit")}),e.onCancel&&(0,n.tZ)(s.Form.ResetButton,{localizationKey:(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:e.onCancel})]})]})}),(0,n.tZ)(s.ContentPage,{Breadcrumbs:null,headerTitle:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:R,headerSubtitleTextVariant:w,sx:e=>({minHeight:e.sizes.$60}),children:S&&(0,n.tZ)(g.l,{resetButtonLabel:(0,c.u1)("createOrganization.invitePage.formButtonReset"),onSuccess:i.nextStep,onReset:T})}),(0,n.tZ)(s.SuccessPage,{title:(0,c.u1)("organizationProfile.invitePage.title"),headerTitleTextVariant:R,contents:(0,n.tZ)(m.a,{}),sx:e=>({minHeight:e.sizes.$60}),onFinish:T})]})}},4095:function(e,t,i){i.d(t,{l:function(){return h}});var n=i(2903),a=i(221),o=i(2784),r=i(8173),l=i(3476),s=i(8690),u=i(5802),c=i(4334),d=i(3736),g=i(1609),m=i(9654);const v=e=>/^\S+@\S+\.\S+$/.test(e),h=e=>{const{navigate:t}=(0,d.useRouter)(),{onSuccess:i,onReset:u=(()=>t("..")),resetButtonLabel:m}=e,{organization:h,invitations:b}=(0,r.useCoreOrganization)({invitations:{pageSize:10,keepPreviousData:!0}}),f=(0,s.useCardState)(),{t:z,locale:x}=(0,c.zJ)(),[S,C]=(0,o.useState)(!1),Z=(0,g.Yp)("emailAddress","",{type:"text",label:(0,c.u1)("formFieldLabel__emailAddresses")}),_=(0,g.Yp)("role","",{label:(0,c.u1)("formFieldLabel__role")});if(!h)return null;const{props:{setError:B,setWarning:P,setSuccess:T,setInfo:y,validatePassword:R,setHasPassedComplexity:w,hasPassedComplexity:k,feedback:F,feedbackType:$,clearFeedback:D,...L}}=Z,I=(!!Z.value.length||S)&&!!_.value;return(0,n.BX)(s.Form.Root,{onSubmit:e=>{e.preventDefault();const t=new FormData(e.currentTarget);return h.inviteMembers({emailAddresses:Z.value.split(","),role:t.get("role")}).then((async()=>{var e;return await(null===(e=null==b?void 0:b.revalidate)||void 0===e?void 0:e.call(b)),i()})).catch((e=>{var t,i,n;if((0,a.kD)(e)&&(e=>{var t,i,n,a;const o=new Set([...null!==(i=null===(t=e.meta)||void 0===t?void 0:t.emailAddresses)&&void 0!==i?i:[],...null!==(a=null===(n=e.meta)||void 0===n?void 0:n.identifiers)&&void 0!==a?a:[]]),r=Z.value.split(",");Z.setValue(r.filter((e=>!o.has(e))).join(","))})(e.errors[0]),(0,a.kD)(e)&&"duplicate_record"===(null===(i=null===(t=e.errors)||void 0===t?void 0:t[0])||void 0===i?void 0:i.code)){const t=(null===(n=e.errors[0].meta)||void 0===n?void 0:n.emailAddresses)||[];f.setError(z((0,c.u1)("organizationProfile.invitePage.detailsTitle__inviteFailed",{email_addresses:(0,g.z$)(t,x)})))}else(0,g.S3)(e,[],f.setError)}))},children:[(0,n.tZ)(s.Form.ControlRow,{elementId:Z.id,children:(0,n.BX)(l.Flex,{direction:"col",gap:2,sx:{width:"100%"},children:[(0,n.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldLabel__emailAddresses")}),(0,n.tZ)(l.Text,{localizationKey:(0,c.u1)("formFieldInputPlaceholder__emailAddresses"),colorScheme:"neutral",sx:e=>({fontSize:e.fontSizes.$xs})}),(0,n.tZ)(s.TagInput,{...L,autoFocus:!0,validate:v,sx:{width:"100%"},validateUnsubmittedEmail:e=>C(v(e))})]})}),(0,n.tZ)(p,{..._}),(0,n.BX)(s.FormButtonContainer,{children:[(0,n.tZ)(s.Form.SubmitButton,{block:!1,isDisabled:!I,localizationKey:(0,c.u1)("organizationProfile.invitePage.formButtonPrimary__continue")}),(0,n.tZ)(s.Form.ResetButton,{localizationKey:m||(0,c.u1)("userProfile.formButtonReset"),block:!1,onClick:u})]})]})},p=e=>{const{options:t,isLoading:i}=(0,u.e)();return(0,n.tZ)(s.Form.ControlRow,{elementId:e.id,children:(0,n.BX)(l.Flex,{direction:"col",gap:2,children:[(0,n.tZ)(l.Text,{localizationKey:e.label}),(0,n.tZ)(m.DQ,{...e.props,roles:t,isDisabled:i,onChange:t=>e.setValue(t),triggerSx:e=>({width:e.sizes.$48,justifyContent:"space-between",display:"flex"}),optionListSx:e=>({minWidth:e.sizes.$48})})]})})}},2848:function(e,t,i){i.d(t,{a:function(){return h},F:function(){return v}});var n=i(2903),a=i(996),o=i(5480),r=i(8173),l=i(3476),s=i(8690),u=i(4804),c=i(3736);const d=({__unstable_manageBillingUrl:e,__unstable_manageBillingMembersLimit:t})=>{const i=(0,c.useRouter)();return(0,n.BX)(l.Flex,{sx:e=>({background:e.colors.$blackAlpha50,padding:e.space.$4,borderRadius:e.radii.$md}),children:[(0,n.tZ)(l.AlertIcon,{variant:"warning",colorScheme:"danger",sx:e=>({marginTop:e.space.$1})}),(0,n.BX)(l.Text,{variant:"regularRegular",sx:e=>({fontWeight:e.fontWeights.$normal,lineHeight:e.lineHeights.$tall}),children:["This organization is limited to ",(0,a.OR)(t)," members.",(0,n.tZ)("br",{}),(0,n.tZ)(l.Link,{variant:"regularRegular",sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,fontWeight:e.fontWeights.$normal}),onClick:()=>i.navigate((0,a.OR)(e)),children:"Upgrade for unlimited members"})]})]})};var g=i(4095),m=i(2609);const v=(0,s.withCardStateProvider)((()=>{const e=(0,l.localizationKeys)("organizationProfile.invitePage.title"),t=(0,l.localizationKeys)("organizationProfile.invitePage.subtitle"),i=(0,s.useCardState)(),u=(0,o.a2)({onNextStep:()=>i.setError(void 0)}),{organization:c}=(0,r.useCoreOrganization)(),{__unstable_manageBillingUrl:v,__unstable_manageBillingMembersLimit:p}=(0,r.useOrganizationProfileContext)();if(!c)return null;const b=!!p&&(0,a.OR)(p)<=c.pendingInvitationsCount+c.membersCount;return(0,n.BX)(o.en,{...u.props,children:[(0,n.BX)(s.ContentPage,{headerTitle:e,headerSubtitle:t,Breadcrumbs:m.G,children:[b&&v&&(0,n.tZ)(d,{__unstable_manageBillingUrl:v,__unstable_manageBillingMembersLimit:p}),(0,n.tZ)(g.l,{onSuccess:u.nextStep})]}),(0,n.tZ)(s.SuccessPage,{title:e,contents:(0,n.tZ)(h,{}),Breadcrumbs:m.G})]})})),h=()=>(0,n.BX)(l.Flex,{direction:"col",center:!0,gap:4,children:[(0,n.tZ)(s.IconCircle,{boxElementDescriptor:l.descriptors.invitationsSentIconBox,iconElementDescriptor:l.descriptors.invitationsSentIcon,icon:u.GT}),(0,n.tZ)(l.Text,{localizationKey:(0,l.localizationKeys)("organizationProfile.invitePage.successMessage")})]})},9654:function(e,t,i){i.d(t,{DQ:function(){return c},RN:function(){return u},wQ:function(){return l}});var n=i(2903),a=(i(2784),i(3476)),o=i(8690),r=i(5802);const l=e=>{const{headers:t,page:i,onPageChange:r,rows:l,isLoading:u,itemCount:c,itemsPerPage:d,pageCount:g,emptyStateLocalizationKey:m}=e,v=c>0?Math.max(0,(i-1)*d)+1:0,h=Math.min(i*d,c);return(0,n.BX)(a.Col,{gap:4,sx:{width:"100%"},children:[(0,n.tZ)(a.Flex,{sx:{overflowX:"auto"},children:(0,n.BX)(a.Table,{sx:{width:"100%"},children:[(0,n.tZ)(a.Thead,{children:(0,n.tZ)(a.Tr,{children:t.map(((e,t)=>(0,n.tZ)(a.Th,{elementDescriptor:a.descriptors.tableHead,localizationKey:e},t)))})}),(0,n.tZ)(a.Tbody,{children:u?(0,n.tZ)(a.Tr,{children:(0,n.tZ)(a.Td,{colSpan:4,children:(0,n.tZ)(a.Spinner,{colorScheme:"primary",sx:{margin:"auto",display:"block"}})})}):l.length?l:(0,n.tZ)(s,{localizationKey:m},"empty")})]})}),(0,n.tZ)(o.Pagination,{count:g,page:i,onChange:r,siblingCount:1,rowInfo:{allRowsCount:c,startingRow:v,endingRow:h}})]})},s=e=>(0,n.tZ)(a.Tr,{children:(0,n.tZ)(a.Td,{colSpan:4,children:(0,n.tZ)(a.Text,{localizationKey:e.localizationKey,sx:e=>({margin:"auto",display:"block",width:"fit-content",fontSize:e.fontSizes.$xs})})})}),u=e=>(0,n.tZ)(a.Tr,{...e,sx:e=>({":hover":{backgroundColor:e.colors.$blackAlpha50}})}),c=e=>{const{value:t,roles:i,onChange:a,isDisabled:l,triggerSx:s,optionListSx:u}=e,c=!i,d=[{label:"admin",value:"admin"},{label:"basic_member",value:"basic_member"}],{localizeCustomRole:g}=(0,r.q)(),m=[...i||[],...d,{label:"guest_member",value:"guest_member"}].find((e=>e.value===t)),v=(c?d:i).map((e=>({value:e.value,label:g(e.value)||e.label})));return(0,n.BX)(o.Select,{elementId:"role",options:v,value:t,onChange:e=>a(e.value),children:[(0,n.tZ)("input",{name:"role",type:"hidden",value:t}),(0,n.tZ)(o.SelectButton,{sx:s||(e=>({color:e.colors.$colorTextSecondary,backgroundColor:"transparent"})),isDisabled:l,children:g(null==m?void 0:m.value)||(null==m?void 0:m.label)}),(0,n.tZ)(o.SelectOptionList,{sx:u})]})}},6884:function(e,t,i){i.d(t,{D:function(){return r}});var n=i(2903),a=i(8690),o=i(4334);const r=e=>{const{organization:t,...i}=e;return(0,n.tZ)(a.AvatarUploader,{...i,title:(0,o.u1)("userProfile.profilePage.imageFormTitle"),avatarPreview:(0,n.tZ)(a.OrganizationAvatar,{size:e=>e.sizes.$11,...t})})}},2609:function(e,t,i){i.d(t,{G:function(){return u},M:function(){return s}});var n=i(2903),a=(i(2784),i(5480)),o=i(8246),r=i(8173),l=i(8690);const s=e=>{const{organization:t}=(0,r.useCoreOrganization)(),{pages:i}=(0,r.useOrganizationProfileContext)(),{isAuthorizedUser:s}=(0,a.DD)((e=>e({permission:"org:sys_memberships:read"})||e({permission:"org:sys_memberships:manage"})));return t?(0,n.BX)(l.NavbarContextProvider,{children:[(0,n.tZ)(l.NavBar,{header:(0,n.tZ)(l.OrganizationPreview,{size:"sm",organization:t,sx:e=>({margin:`0 0 ${e.space.$4} ${e.space.$2}`})}),routes:i.routes.filter((e=>e.id!==o.b.MEMBERS||e.id===o.b.MEMBERS&&s)),contentRef:e.contentRef}),e.children]}):null},u=e=>{const{pages:t}=(0,r.useOrganizationProfileContext)();return(0,n.tZ)(l.Breadcrumbs,{...e,pageToRootNavbarRoute:t.pageToRootNavbarRouteMap})}},1659:function(e,t,i){i.d(t,{$o:function(){return o},AO:function(){return n},Sz:function(){return a}});const n={userMemberships:{infinite:!0},userInvitations:{infinite:!0},userSuggestions:{infinite:!0,status:["pending","accepted"]}},a=(e,t)=>void 0===t?[{data:[e],total_count:1}]:t.map((t=>{if(void 0===t)return t;const i=t.data.map((t=>t.id===e.id?{...e}:t));return{...t,data:i}})),o=(e,t)=>{var i;const n=null===(i=null==t?void 0:t[t.length-1])||void 0===i?void 0:i.total_count;if(n)return null==t?void 0:t.map((t=>{if(void 0===t)return t;const i=t.data.filter((t=>t.id!==e.id));return{...t,data:i,total_count:n-1}}))}}}]);