"use strict";(globalThis.webpackChunk_clerk_clerk_js=globalThis.webpackChunk_clerk_clerk_js||[]).push([[490],{4921:function(e,t,o){o.r(t),o.d(t,{ImpersonationFab:function(){return h}});var n=o(2903),i=o(2784),r=o(4016),s=o(8173),a=o(3476),c=o(353),l=o(4804),d=o(9820);const p=({width:e,height:t,...o})=>{const{sx:i,...r}=o;return(0,n.tZ)(a.Col,{elementDescriptor:a.descriptors.impersonationFabIconContainer,center:!0,sx:[o=>({width:e,height:t,backgroundColor:o.colors.$danger500,borderRadius:o.radii.$circle}),i],...r,children:(0,n.tZ)(a.Icon,{elementDescriptor:a.descriptors.impersonationFabIcon,icon:l.bA,sx:e=>({color:e.colors.$white}),size:"lg"})})},u=({title:e,signOutText:t})=>{const o=(0,s.useCoreSession)(),{signOut:i}=(0,s.useCoreClerk)();return(0,n.BX)(a.Col,{sx:e=>({width:"100%",paddingLeft:e.sizes.$4,paddingRight:e.sizes.$6,whiteSpace:"nowrap"}),children:[(0,n.tZ)(a.Text,{colorScheme:"neutral",elementDescriptor:a.descriptors.impersonationFabTitle,variant:"regularMedium",truncate:!0,localizationKey:e}),(0,n.tZ)(a.Link,{variant:"regularMedium",elementDescriptor:a.descriptors.impersonationFabActionLink,sx:e=>({alignSelf:"flex-start",color:e.colors.$primary500,":hover":{cursor:"pointer"}}),localizationKey:t,onClick:async()=>{await i({sessionId:o.id})}})]})},m=()=>{const e=(0,s.useCoreSession)(),{t:t}=(0,a.useLocalizations)(),{parsedInternalTheme:o}=(0,a.useAppearance)(),l=(0,i.useRef)(null),m=!!(null==e?void 0:e.actor),h=o.sizes.$16,f=h,w="--cl-impersonation-fab-top",x="--cl-impersonation-fab-right",$=()=>{const e=l.current;if(!e)return;const t=window.innerWidth-e.offsetLeft-e.offsetWidth,o=window.innerHeight-e.offsetTop-e.offsetHeight;[e.offsetLeft,t,e.offsetTop,o].some((e=>e<0))&&(document.documentElement.style.setProperty(x,"23px"),document.documentElement.style.setProperty(w,"109px"))},g=i.useCallback((e=>{e.stopPropagation(),e.preventDefault();const t=l.current;if(!t)return;const o=window.innerWidth-t.offsetLeft-t.offsetWidth-e.movementX+"px";document.documentElement.style.setProperty(x,o),document.documentElement.style.setProperty(w,t.offsetTop- -e.movementY+"px")}),[]);if((0,i.useEffect)((()=>(window.addEventListener("resize",$),()=>{window.removeEventListener("resize",$)})),[]),!m||!e.user)return null;const v=(0,a.localizationKeys)("impersonationFab.title",{identifier:(0,r.Pp)(e.user)||(0,r.xC)(e.user)}),b=t(v).length;return(0,n.tZ)(c.h,{children:(0,n.BX)(a.Flex,{ref:l,elementDescriptor:a.descriptors.impersonationFab,onPointerDown:()=>{window.addEventListener("pointermove",g),window.addEventListener("pointerup",(()=>{window.removeEventListener("pointermove",g),$()}),{once:!0})},align:"center",sx:e=>({touchAction:"none",position:"fixed",overflow:"hidden",top:`var(${w}, 109px)`,right:`var(${x}, 23px)`,zIndex:e.zIndices.$fab,boxShadow:e.shadows.$fabShadow,borderRadius:e.radii.$halfHeight,backgroundColor:e.colors.$white,fontFamily:e.fonts.$main,":hover":{cursor:"grab"},":hover #cl-impersonationText":{transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$slower} ease ${e.transitionDuration.$slowest}`,maxWidth:`min(calc(50vw - ${h} - 2 * 23px), ${b}ch)`,[d.mqu.md]:{maxWidth:`min(calc(100vw - ${h} - 2 * 23px), ${b}ch)`},opacity:1},":hover #cl-impersonationEye":{transform:"rotate(-180deg)"}}),children:[(0,n.tZ)(p,{id:"cl-impersonationEye",width:h,height:f,sx:e=>({transition:`transform ${e.transitionDuration.$slowest} ease`})}),(0,n.tZ)(a.Flex,{id:"cl-impersonationText",sx:e=>({transition:`max-width ${e.transitionDuration.$slowest} ease, opacity ${e.transitionDuration.$fast} ease`,maxWidth:"0px",opacity:0}),children:(0,n.tZ)(u,{title:v,signOutText:(0,a.localizationKeys)("impersonationFab.action__signOut")})})]})})},h=(0,s.withCoreUserGuard)((()=>(0,n.tZ)(d.InternalThemeProvider,{children:(0,n.tZ)(m,{})})))}}]);